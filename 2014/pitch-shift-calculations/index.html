<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>Pitch Shift Calculations</title> <meta name="description" content="Music Theory BackgroundAll musical notes are constant tones of a certain frequency, known as their fundamental frequency. Table 1 shows the fundamental frequ..."> <link rel="shortcut icon" type="image/png" href="/favicon.png" > <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://incidentnormal.github.io/2014/pitch-shift-calculations/"> <link rel="alternate" type="application/rss+xml" title="IncidentNormal" href="https://incidentnormal.github.io/feed.xml"> <script src="/assets/js/modernizr.js"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-84671760-1', 'auto'); ga('send', 'pageview'); </script> </head> <body"> <main class="wrapper"> <header class="site-header"> <a href="#navbar" id="menu-burger" class="menu-burger">Menu <span class="nav-icon"></span> <svg x="0px" y="0px" width="54px" height="54px" viewBox="0 0 54 54"> <circle fill="transparent" stroke="#000000" stroke-width="1" cx="27" cy="27" r="25" stroke-dasharray="157 157" stroke-dashoffset="157"></circle> </svg> </a> <div id="navbar" class="navbar"> <div class="navigation-wrapper"> <div class="half-block"> <h1><strong>incident</strong>Normal.<sub>github.io</sub></h1> <h2>Navigation</h2> <nav> <ul class="primary-nav"> <li><a href="/">Home</a></li> <li><a href="/blog">Blog</a></li> <li><a href="/about">About</a></li> <li><a href="https://github.com/IncidentNormal" target="_blank"><i class="icon icon-github"></i> Github</a></li> <li><a href="https://twitter.com" target="_blank"><i class="icon icon-twitter"></i> Twitter</a></li> <li><a href="/feed.xml" target="_blank"><i class="icon icon-feed"></i> RSS</a></li> </ul> </nav> </div> </div> </div> </header> <article class="post" itemscope itemtype="http://schema.org/BlogPosting"> <header class="post-header intro"> <div class="intro-in"> <h1 class="post-title" itemprop="name headline">Pitch Shift Calculations</h1> <em><h2 class="post-subtitle" itemprop="name subtitle"></h2></em> <p class="post-meta">[ <time datetime="2014-01-17T05:00:00Z" itemprop="datePublished">Jan 17, 2014</time> ] • [ <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Duncan Tait</span></span> ]</p> </div> </header> <div class="post-content container" itemprop="articleBody"> <div class="MsoNormal"><u><span lang="EN-US"><span style="font-family: Trebuchet MS, sans-serif;">Music Theory Background</span></span></u></div><div class="MsoNormal"><span style="font-family: 'Trebuchet MS', sans-serif;"><br /></span></div><div class="MsoNormal"><span style="font-family: 'Trebuchet MS', sans-serif;">All musical notes are constant tones of a certain frequency, known as their fundamental frequency. Table 1 shows the fundamental frequency of each note in the first 7 octaves. For reference, ‘</span><i style="font-family: 'Trebuchet MS', sans-serif;">middle C’</i><span style="font-family: 'Trebuchet MS', sans-serif;"> is denoted as&nbsp;</span><i>C<sub>4</sub></i><i style="font-family: 'Trebuchet MS', sans-serif;">,</i><span style="font-family: 'Trebuchet MS', sans-serif;"> which corresponds to a frequency of </span><i style="font-family: 'Trebuchet MS', sans-serif;">261.6 </i><span style="font-family: 'Trebuchet MS', sans-serif;">Hz (more accurately, </span><i style="font-family: 'Trebuchet MS', sans-serif;">261.625565 </i><span style="font-family: 'Trebuchet MS', sans-serif;">Hz</span><i style="font-family: 'Trebuchet MS', sans-serif;"><w:sdt citation="t" id="1243140397"><span style="font-style: normal; mso-ansi-language: EN-GB; mso-no-proof: yes;">&nbsp;</span><span lang="EN-GB" style="font-style: normal; mso-ansi-language: EN-GB; mso-no-proof: yes;">(Google, 2013)</span></w:sdt></i><span style="font-family: 'Trebuchet MS', sans-serif;">).</span></div><div class="MsoNormal"><br /></div><div class="MsoNormal"><span lang="EN-US"><span style="font-family: Trebuchet MS, sans-serif;">In music, an octave is the interval between one musical pitch and another with half or double its frequency. The octave relationship is a natural phenomenon that has been referred to as the "basic miracle of music".&nbsp;</span></span><span style="font-family: Trebuchet MS, sans-serif;"><span style="background-color: white; line-height: 19.200000762939453px;">It may be derived from the '<a href="http://en.wikipedia.org/wiki/Harmonic_series_(music)" target="_blank">harmonic series</a>'- as it is</span><span style="background-color: white; line-height: 19.200000762939453px;">&nbsp;the interval between the first and second harmonics</span></span><span style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">.&nbsp;</span><span style="font-family: 'Trebuchet MS', sans-serif;">This means that the first and second harmonics are always exactly one octave apart.</span><br /><span style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;"><br /></span><span style="font-family: 'Trebuchet MS', sans-serif;">An example that illustrates this halving or doubling of frequency to go down or up an octave is as follows; if one note has a frequency of </span><i style="font-family: 'Trebuchet MS', sans-serif;">440</i><span style="font-family: 'Trebuchet MS', sans-serif;"> Hz, the note an octave above it is at </span><i style="font-family: 'Trebuchet MS', sans-serif;">880</i><span style="font-family: 'Trebuchet MS', sans-serif;"> Hz, and the note an octave below is at </span><i style="font-family: 'Trebuchet MS', sans-serif;">220</i><span style="font-family: 'Trebuchet MS', sans-serif;"> Hz. The ratio of frequencies of two notes an octave apart is therefore 2:1. Further octaves of a note occur at 2</span><sup style="font-family: 'Trebuchet MS', sans-serif;">n</sup><span style="font-family: 'Trebuchet MS', sans-serif;"> times the frequency of that note (where n is an integer), such as 2, 4, 8, 16, etc. and the reciprocal of that series. For example, </span><i style="font-family: 'Trebuchet MS', sans-serif;">55</i><span style="font-family: 'Trebuchet MS', sans-serif;"> Hz and </span><i style="font-family: 'Trebuchet MS', sans-serif;">440</i><span style="font-family: 'Trebuchet MS', sans-serif;"> Hz are one and two octaves away from </span><i style="font-family: 'Trebuchet MS', sans-serif;">110</i><span style="font-family: 'Trebuchet MS', sans-serif;"> Hz because they are 0.5 (or 2</span><sup style="font-family: 'Trebuchet MS', sans-serif;">−1</sup><span style="font-family: 'Trebuchet MS', sans-serif;">) and 4 (or 2</span><sup style="font-family: 'Trebuchet MS', sans-serif;">2</sup><span style="font-family: 'Trebuchet MS', sans-serif;">) times the frequency, respectively.</span></div><div class="MsoNormal"><br /></div><div class="MsoNormal"><span lang="EN-US"><span style="font-family: Trebuchet MS, sans-serif;"></span></span></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="float: left; margin-right: 1em; text-align: left;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-qWWThFO-7T0/UtioxGbkZRI/AAAAAAAACXk/Sts47OtfGmY/s1600/fundamental_freqs.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://1.bp.blogspot.com/-qWWThFO-7T0/UtioxGbkZRI/AAAAAAAACXk/Sts47OtfGmY/s1600/fundamental_freqs.png" height="321" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;"><div align="center" class="MsoNormal"><span lang="EN-US" style="color: #1f497d;"><span style="font-family: Trebuchet MS, sans-serif; font-size: xx-small;">Table 1: Musical notes and their respective fundamental frequencies</span></span></div></td></tr></tbody></table><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-cduYIVyZ_kA/UtiotejIEvI/AAAAAAAACWQ/epS72WRLJBA/s1600/eqn1.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://4.bp.blogspot.com/-cduYIVyZ_kA/UtiotejIEvI/AAAAAAAACWQ/epS72WRLJBA/s1600/eqn1.png" height="137" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;"><div align="center" class="MsoNormal"><span lang="EN-US" style="color: #1f497d;"><span style="font-family: Trebuchet MS, sans-serif; font-size: xx-small;">Equation 1: MTS definition of musical note’s frequencies: <i>p</i> is the absolute number of semitones of a frequency <i>f</i></span></span><span style="color: #1f497d; font-family: 'Trebuchet MS', sans-serif; font-size: xx-small;">(Hz) above <i><b>C</b></i> 5 octaves below <i><b>middle C</b></i>&nbsp;</span><span style="font-size: xx-small;"><span style="color: #1f497d; font-family: 'Trebuchet MS', sans-serif;">(</span><i><span lang="EN-US" style="color: #1f497d;"><b>C<sub>-1</sub></b></span></i></span><span style="color: #1f497d; font-family: 'Trebuchet MS', sans-serif; font-size: xx-small;">)</span></div><div class="separator" style="clear: both; text-align: center;"></div></td></tr></tbody></table><div class="MsoNormal" style="font-size: 13px;"><span lang="EN-US"><span style="font-family: Trebuchet MS, sans-serif;"><span style="font-size: small;">These frequencies are standardized according to the <a href="http://en.wikipedia.org/wiki/MIDI_Tuning_Standard" target="_blank">MIDI Tuning Standard</a> (MTS). They are defined according to Equation 1. The quantity log</span></span><sub><span style="font-family: Cambria, serif;"><span style="font-size: xx-small;">2</span></span></sub><span style="font-family: Trebuchet MS, sans-serif;"><span style="font-size: small;">(</span><i style="font-size: medium;">ƒ</i><span style="font-size: small;">/</span><i style="font-size: medium;">440</i><span style="font-size: small;">) is the number of octaves above the <i>440</i> Hz <i>concert A </i>(</span></span><i style="font-size: medium;">A<sub>4</sub></i><span style="font-family: Trebuchet MS, sans-serif;"><span style="font-size: small;">&nbsp;in Table 1)and will be negative if the frequency is below that pitch. Multiplying it by 12 gives the number of semitones above that concert A, as there are 12 semitones in an octave. Adding 69 gives the number of semitones above the&nbsp;</span><i style="font-size: medium;">C</i><span style="font-size: small;">&nbsp;five octaves below&nbsp;</span><i><span style="font-size: small;">middle C (</span></i></span></span><i><span lang="EN-US"><span style="font-family: Trebuchet MS, sans-serif; font-size: small;">C<sub>-1</sub></span></span></i><i style="font-family: 'Trebuchet MS', sans-serif;"><span style="font-size: small;">)</span></i><span style="font-family: 'Trebuchet MS', sans-serif; font-size: small;">. Using Equation 1 in an example;&nbsp;</span><i style="font-family: 'Trebuchet MS', sans-serif; font-size: medium;">middle C</i><span style="font-family: 'Trebuchet MS', sans-serif; font-size: small;">&nbsp;(</span><i style="font-size: medium;">C<sub>4</sub></i><span style="font-family: 'Trebuchet MS', sans-serif; font-size: small;">) will be used for the frequency.</span><br /><div class="MsoNormal"><span lang="EN-US"><sub><o:p></o:p></sub></span></div><div class="MsoNormal"><span lang="EN-US"><o:p></o:p></span></div><div class="MsoNormal"><span lang="EN-US" style="color: #1f497d;"><o:p></o:p></span></div><div class="MsoNormal"><span lang="EN-US"><o:p></o:p></span></div></div><div class="MsoNormal" style="font-size: 13px;"><br /></div><div class="MsoNormal" style="font-size: 13px;"><span lang="EN-US" style="color: #1f497d;"><span style="font-family: Trebuchet MS, sans-serif; font-size: small;"></span></span></div><div class="MsoNormal" style="font-size: 13px;"><span lang="EN-US"><span style="font-family: Trebuchet MS, sans-serif; font-size: small;">For middle C, use&nbsp;<i>f</i>&nbsp;= 261.6 Hz:</span></span></div><div class="MsoNormal" style="font-size: 13px;"><span lang="EN-US"><span style="font-family: Trebuchet MS, sans-serif; font-size: small;"><br /></span></span></div><div class="separator" style="clear: both; font-size: 13px; text-align: -webkit-center;"><a href="http://4.bp.blogspot.com/-9etgfkO_mKE/UtioucoaVYI/AAAAAAAACWw/4a7Wl1I3J2U/s1600/eqn2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-9etgfkO_mKE/UtioucoaVYI/AAAAAAAACWw/4a7Wl1I3J2U/s1600/eqn2.png" height="70" width="400" /></a></div><div align="center" class="MsoNormal" style="font-size: 13px; text-align: -webkit-center;"><span lang="EN-US" style="color: #1f497d;"><span style="font-family: Trebuchet MS, sans-serif; font-size: xx-small;">Equation 2: Number of octaves middle C (</span><i style="color: black; font-size: x-small; text-align: left;"><span style="color: #1f497d;">C</span><sub style="color: #1f497d;">4</sub></i><span style="font-family: Trebuchet MS, sans-serif; font-size: xx-small;">) is above&nbsp;</span><i style="color: black; font-size: x-small; text-align: left;"><span style="color: #1f497d;">A</span><sub style="color: #1f497d;">4</sub></i><span style="font-family: Trebuchet MS, sans-serif; font-size: xx-small;">. This means that&nbsp;</span><i style="color: black; font-size: x-small; text-align: left;"><span style="color: #1f497d;">C</span><sub style="color: #1f497d;">4</sub></i><span style="font-family: Trebuchet MS, sans-serif; font-size: xx-small;">&nbsp;is 0.75 octaves below&nbsp;</span><i style="color: black; font-size: x-small; text-align: left;"><span style="color: #1f497d;">A</span><sub style="color: #1f497d;">4</sub></i><span style="font-family: Trebuchet MS, sans-serif; font-size: xx-small;">.</span></span></div><div align="center" class="MsoNormal" style="font-size: 13px; text-align: -webkit-center;"><span lang="EN-US" style="color: #1f497d; font-size: 10pt;"><span style="font-family: Trebuchet MS, sans-serif;"><br /></span></span></div><div align="center" class="MsoNormal" style="font-size: 13px; text-align: -webkit-center;"><span lang="EN-US" style="color: #1f497d; font-size: 10pt;"></span></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td><a href="http://3.bp.blogspot.com/-HWKzjE3OgUI/Utiou1jBs5I/AAAAAAAACW0/zwcURqxkJSQ/s1600/eqn3.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://3.bp.blogspot.com/-HWKzjE3OgUI/Utiou1jBs5I/AAAAAAAACW0/zwcURqxkJSQ/s1600/eqn3.png" height="43" width="320" /></a></td></tr><tr><td class="tr-caption" style="font-size: 13px;"><div align="center" class="MsoNormal"><span lang="EN-US" style="color: #1f497d;"><span style="font-family: Trebuchet MS, sans-serif; font-size: xx-small;">Equation 3: Number of semitones middle C (</span><i style="color: black; font-size: x-small; text-align: left;"><span style="color: #1f497d;">C</span><sub style="color: #1f497d;">4</sub></i><span style="font-family: Trebuchet MS, sans-serif; font-size: xx-small;">) is above&nbsp;</span><i style="color: black; font-size: x-small; text-align: left;"><span style="color: #1f497d;">A</span><sub style="color: #1f497d;">4</sub></i><span style="font-family: Trebuchet MS, sans-serif; font-size: xx-small;">. This shows that&nbsp;<i>A</i></span></span><i style="font-size: x-small; text-align: left;"><sub style="color: #1f497d;">4</sub></i><span style="color: #1f497d; font-family: 'Trebuchet MS', sans-serif; font-size: xx-small;">&nbsp;is 9 semitones below&nbsp;</span><i style="font-size: x-small; text-align: left;"><span style="color: #1f497d;">A</span><sub style="color: #1f497d;">4</sub></i><span style="color: #1f497d; font-family: 'Trebuchet MS', sans-serif; font-size: xx-small;">.</span></div></td></tr></tbody></table><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="font-size: 13px; margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td><a href="http://4.bp.blogspot.com/-z3Zm_CwNZ-0/UtioxQxwsFI/AAAAAAAACX0/WVHoEKOQqdo/s1600/eqn4.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://4.bp.blogspot.com/-z3Zm_CwNZ-0/UtioxQxwsFI/AAAAAAAACX0/WVHoEKOQqdo/s1600/eqn4.png" /></a></td></tr><tr><td class="tr-caption" style="font-size: 10px;"><div align="center" class="MsoNormal" style="margin: 0px;"><span lang="EN-US" style="color: #1f497d;"><span style="font-family: Trebuchet MS, sans-serif; font-size: xx-small;">Equation 4: Number of semitones&nbsp;</span></span><i style="font-size: x-small; text-align: left;"><span style="color: #1f497d;">C</span><sub style="color: #1f497d;">4</sub></i><span style="color: #1f497d; font-family: 'Trebuchet MS', sans-serif; font-size: xx-small;">&nbsp;is above ‘(</span><span style="font-size: xx-small;"><i><span lang="EN-US" style="color: #1f497d;"><b>C<sub>-1</sub></b></span></i></span><span style="color: #1f497d; font-family: 'Trebuchet MS', sans-serif; font-size: xx-small;">)</span><span style="color: #1f497d; font-family: 'Trebuchet MS', sans-serif; font-size: xx-small;">’ or&nbsp;</span><i style="color: #1f497d; font-family: 'Trebuchet MS', sans-serif; font-size: x-small;">8.18</i><span style="color: #1f497d; font-family: 'Trebuchet MS', sans-serif; font-size: xx-small;">&nbsp;Hz&nbsp;&nbsp;(5 octaves below&nbsp;</span><i style="font-size: x-small; text-align: left;"><span style="color: #1f497d;">C</span><sub style="color: #1f497d;">4</sub></i><span style="color: #1f497d; font-family: 'Trebuchet MS', sans-serif; font-size: xx-small;">). This shows it is 60 semitones above it, and 12*5=60 so exactly 5 octaves which is correct.</span></div></td></tr></tbody></table><div class="MsoNormal" style="font-size: 13px;"><u><span lang="EN-US"><span style="font-family: Trebuchet MS, sans-serif; font-size: small;">Pitch-Shifting<o:p></o:p></span></span></u></div><div class="MsoNormal" style="font-size: 13px;"><span style="font-size: small;"><br /></span></div><div class="MsoNormal" style="font-size: 13px;"><span lang="EN-US"><span style="font-family: Trebuchet MS, sans-serif; font-size: small;">Musically, pitch-shifting is shifting the&nbsp;<i>melody</i>&nbsp;by a number of semitones (1 or more) up or down. From a mathematical or signals perspective it involves scaling the fundamental frequency of a note by a specific factor to achieve the frequency of the desired pitch-shifted note. The formula for this can be seen in Equation 5.&nbsp;</span></span></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td><a href="http://3.bp.blogspot.com/-q4QnUQvcaCc/UtiovHrZihI/AAAAAAAACXA/GSBpw6H6LoY/s1600/eqn5.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://3.bp.blogspot.com/-q4QnUQvcaCc/UtiovHrZihI/AAAAAAAACXA/GSBpw6H6LoY/s1600/eqn5.png" height="126" width="640" /></a></td></tr><tr><td class="tr-caption" style="font-size: 13px;"><div align="center" class="MsoNormal"><span style="font-family: Trebuchet MS, sans-serif;"><span lang="EN-US" style="color: #1f497d; font-size: xx-small;">Equation 5:&nbsp;</span><i><span lang="EN-US" style="color: #1f497d; font-size: x-small;">s</span></i><span lang="EN-US" style="color: #1f497d; font-size: xx-small;">&nbsp;is the number of semitones to shift by;&nbsp;</span><span style="font-size: x-small;"><i><span lang="EN-US" style="color: #1f497d;">f</span></i><i><sub><span lang="EN-US" style="color: #1f497d;">final</span></sub></i></span><span lang="EN-US" style="color: #1f497d; font-size: xx-small;">&nbsp;is the output frequency (Hz),&nbsp;</span><span style="font-size: x-small;"><i><span lang="EN-US" style="color: #1f497d;">f</span></i><i><sub><span lang="EN-US" style="color: #1f497d;">initial</span></sub></i></span></span><span lang="EN-US" style="color: #1f497d; font-size: xx-small;"><span style="font-family: Trebuchet MS, sans-serif;">&nbsp;is the input frequency (Hz).</span></span></div></td></tr></tbody></table><div class="MsoNormal" style="font-size: 13px;"><span lang="EN-US"><span style="font-family: Trebuchet MS, sans-serif; font-size: small;">The frequency of a note can be analogized to the&nbsp;<i>tempo</i>&nbsp;or&nbsp;<i>beats-per-minute</i>&nbsp;(BPM) of a song. Changing the speed at which a song is played will change the pitch at which each note is played by the same scaling factor as the speed change. This means that if the entire song is in a certain musical&nbsp;<i>key</i>, changing the pitch by an exact number of semitones will transpose the key by this number of semitones. The formula for this can be seen in Equation 6, which is just Equation 5 with&nbsp;<i>s&nbsp;</i>= 1, and 1÷12 = 0.83, and then the parameter <i>k</i>&nbsp;(number of semitones to pitch shift by) is a multiplier on the exponent (0.83). This may seem confusing, but remember that an exponent to the power of another number is the same as the exponent and the number multiplied together.</span></span></div><div class="MsoNormal" style="font-size: 13px;"><span lang="EN-US"></span></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td><a href="http://1.bp.blogspot.com/-vUnxVYuZ5lM/Utiovn-9t0I/AAAAAAAACXI/7YIXXxYkm9Q/s1600/eqn6.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://1.bp.blogspot.com/-vUnxVYuZ5lM/Utiovn-9t0I/AAAAAAAACXI/7YIXXxYkm9Q/s1600/eqn6.png" height="77" width="400" /></a></td></tr><tr><td class="tr-caption" style="font-size: 13px;"><div align="center" class="MsoNormal"><span lang="EN-US" style="color: #1f497d;"><span style="font-family: Trebuchet MS, sans-serif;"><span style="font-size: xx-small;">Equation 6:&nbsp;</span><i><span style="font-size: x-small;">y</span></i><span style="font-size: xx-small;">&nbsp;is the new BPM,&nbsp;</span><i><span style="font-size: x-small;">x</span></i><span style="font-size: xx-small;">&nbsp;is the original BPM,&nbsp;</span><i><span style="font-size: x-small;">k</span></i><span style="font-size: xx-small;">&nbsp;is the number of semitones to pitch shift (+ or -)</span></span></span></div></td></tr></tbody></table><div class="separator" style="clear: both; font-size: 13px; text-align: center;"><a href="http://2.bp.blogspot.com/-jYgFhEOCYeM/UtiowN44aPI/AAAAAAAACXo/cLwyiLPnGNY/s1600/eqn7.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-jYgFhEOCYeM/UtiowN44aPI/AAAAAAAACXo/cLwyiLPnGNY/s1600/eqn7.png" height="75" width="400" /></a></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="font-size: 13px; margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td><a href="http://3.bp.blogspot.com/-l1K-Ys1t6aY/UtiowbEfsPI/AAAAAAAACXY/LpWv8-IXtf4/s1600/eqn8.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://3.bp.blogspot.com/-l1K-Ys1t6aY/UtiowbEfsPI/AAAAAAAACXY/LpWv8-IXtf4/s1600/eqn8.png" height="77" width="320" /></a></td></tr><tr><td class="tr-caption" style="font-size: 10px;"><div align="center" class="MsoNormal"><span style="font-family: Trebuchet MS, sans-serif;"><span style="color: #1f497d;"><span style="font-size: xx-small;">Equation 7: a is the constant defined by&nbsp;</span><span style="font-size: x-small;">2</span></span></span><sup><span lang="EN-US" style="color: #1f497d;"><span style="font-family: Trebuchet MS, sans-serif; font-size: xx-small;">0.83</span></span></sup><span style="color: #1f497d; font-family: 'Trebuchet MS', sans-serif; font-size: xx-small;">;&nbsp;</span><span style="color: #1f497d; font-family: 'Trebuchet MS', sans-serif;"><span style="font-size: x-small;"><i>y</i>,&nbsp;<i>x</i></span></span><span style="color: #1f497d; font-family: 'Trebuchet MS', sans-serif; font-size: xx-small;">&nbsp;and&nbsp;</span><span style="color: #1f497d; font-family: 'Trebuchet MS', sans-serif;"><span style="font-size: x-small;"><i>k</i></span></span><span style="color: #1f497d; font-family: 'Trebuchet MS', sans-serif; font-size: xx-small;">&nbsp;are as above for Equation 6</span></div></td></tr></tbody></table><div class="MsoNormal" style="font-size: 10px;"><span style="font-size: small;"><span lang="EN-US"><span style="font-family: Trebuchet MS, sans-serif;">The practical version of this algorithm should actually use&nbsp;<i>a</i>&nbsp;</span></span><span lang="EN-US" style="font-family: 'Trebuchet MS', sans-serif;">= 1.059463094359295260, as even though the applications of it (such as&nbsp;<i>Serato</i>) do not support BPM fidelity greater than 1 decimal place, meaning that the use of these calculations in a mix of 2 pieces of music will result in a&nbsp;<i>slight</i>&nbsp;mismatch in key between them anyway, the difference between the value to 18 d.p. and 2 d.p. will result in meaningful differences as the number of semitones to transpose by increases, certainly enough to change the output BPM by more than 0.1.<o:p></o:p></span></span></div><div class="MsoNormal" style="font-size: 10px;"><br /></div><div class="MsoNormal" style="font-size: 10px; text-align: center;"></div><div class="MsoNormal" style="font-size: 10px;"><span lang="EN-US"><span style="font-family: Trebuchet MS, sans-serif; font-size: small;">Although plotting the data on a graph shows an apparently linear relationship, this is not the case – as returning the equation of the line yields a different linear equation depending on the range of data input values. For example, Table 2 below shows results from pitch range +1.0 to +6.0 semitones (half an octave upward) and Table 3 shows the results from pitch range -1.0 to -6.0 (half an octave downward). The equation of the straight line that passes through these points (or as near to as possible) for&nbsp;<i>70&nbsp;</i>BPM<i>&nbsp;</i>is:</span></span></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="font-size: 13px; margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td><a href="http://4.bp.blogspot.com/-jVMtMMgYVOc/UtiowhuqzJI/AAAAAAAACXg/6m5Ud6DFv6I/s1600/eqn9.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://4.bp.blogspot.com/-jVMtMMgYVOc/UtiowhuqzJI/AAAAAAAACXg/6m5Ud6DFv6I/s1600/eqn9.png" height="32" width="320" /></a></td></tr><tr><td class="tr-caption" style="font-size: 10px;"><div align="center" class="MsoNormal"><span style="color: #1f497d;"><span style="font-family: Trebuchet MS, sans-serif; font-size: xx-small;">Equation 8: Linear equation (slope-intercept form) closest to results (data points) from pitch range +0.5 to +3.0</span></span></div></td></tr></tbody></table><div class="MsoNormal" style="font-size: 13px; text-align: center;"><span style="font-family: 'Trebuchet MS', sans-serif; font-size: small; text-align: left;">If the range of data input values (the pitch range) is extended, however, to a pitch range between +1.0 and +12.0 (full octave upward), the equation of the straight line closest to these data points is shown in Equation 9:</span></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="font-size: 13px; margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td><a href="http://2.bp.blogspot.com/-96jAA61mmYc/UtiotwO4vWI/AAAAAAAACWs/NLOwhGgeNek/s1600/eqn10.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><span style="font-family: Trebuchet MS, sans-serif;"><img border="0" src="http://2.bp.blogspot.com/-96jAA61mmYc/UtiotwO4vWI/AAAAAAAACWs/NLOwhGgeNek/s1600/eqn10.png" height="40" width="320" /></span></a></td></tr><tr><td class="tr-caption" style="font-size: 10px;"><div align="center" class="MsoNormal"><span style="font-family: Trebuchet MS, sans-serif; font-size: xx-small;"><span style="color: #1f497d;">Equation 9: Linear equation&nbsp;</span></span><span style="color: #1f497d; font-family: 'Trebuchet MS', sans-serif; font-size: xx-small;">(slope-intercept form)</span><span style="color: #1f497d; font-family: 'Trebuchet MS', sans-serif; font-size: xx-small;">&nbsp;closest to results (data points) &nbsp;from pitch range +0.5 to +5.0</span></div></td></tr></tbody></table><div style="font-size: 13px;"><span lang="EN-US" style="font-family: 'Trebuchet MS', sans-serif; font-size: small;">This result is counterintuitive to what would be expected in gathering data that was part of a linear set. To explain this, consider the case&nbsp;<i>x&nbsp;</i>= 0 (i.e. zero pitch change),&nbsp;<i>y</i>&nbsp;should be equal to the original BPM value, which in Cartesian geometry is the intercept '<i>c</i>' from the slope-intercept form of the linear equation&nbsp;<i><b>y = mx&nbsp;+ c</b>.</i>&nbsp;When evaluated, however, this value is 69.681 for the first equation with fewer data points (Equation 8), and&nbsp;</span><span style="font-size: small;"><span style="font-family: Trebuchet MS, sans-serif;">69.452 for the second equation with more data points (Equation 9)), it should be 70 as the&nbsp;</span><b style="font-family: 'Trebuchet MS', sans-serif;"><i>mx</i>&nbsp;</b><span style="font-family: Trebuchet MS, sans-serif;">term of the linear equation goes to zero, leaving <i style="font-weight: bold;">y = c </i>or <b><i>y = 70</i></b>.&nbsp;The crux is that the more data points which are added (for instance in Equation 9) the further from 70 this intercept value ('</span><b style="font-family: 'Trebuchet MS', sans-serif;"><i>c</i></b><span style="font-family: Trebuchet MS, sans-serif;">') becomes. This is because the relationship is actually of an&nbsp;</span></span><span style="background-color: white; line-height: 19.200000762939453px;"><span style="font-family: Trebuchet MS, sans-serif; font-size: small;">exponential nature</span></span><span style="font-size: small;"><span style="font-family: Trebuchet MS, sans-serif;">&nbsp;rather than a linear nature. Because the&nbsp;constant ‘</span></span><i style="font-family: 'Trebuchet MS', sans-serif; font-size: medium;">a</i><span style="font-family: 'Trebuchet MS', sans-serif; font-size: small;">’ is so close to 1 (<i>~1.06</i>), the relationship looks linear on inspection, especially when ‘</span><i style="font-family: 'Trebuchet MS', sans-serif; font-size: medium;">k</i><span style="font-family: 'Trebuchet MS', sans-serif; font-size: small;">’ is small. It, however, is not - and bearing this in mind; the correct equation for the results (when the original BPM is <i>70)</i>&nbsp;is:</span></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td><a href="http://4.bp.blogspot.com/-jBYEHw97zhA/Utiot6C9yKI/AAAAAAAACWc/YbnuxI4tXTU/s1600/eqn11.png" imageanchor="1" style="font-size: 13px; margin-left: auto; margin-right: auto;"><img border="0" src="http://4.bp.blogspot.com/-jBYEHw97zhA/Utiot6C9yKI/AAAAAAAACWc/YbnuxI4tXTU/s1600/eqn11.png" height="103" width="400" /></a></td></tr><tr><td class="tr-caption" style="font-size: 13px;"><div align="center" class="MsoNormal"><span lang="EN-US" style="color: #1f497d;"><span style="font-family: Trebuchet MS, sans-serif;"><span style="font-size: xx-small;">Equation 10: Correct implementation of the equation pitch change at 70 BPM, <i>a</i> and <i>k</i> are as above for Equation 6</span></span></span></div><div><span lang="EN-US" style="color: #1f497d;"></span></div></td></tr></tbody></table><div class="MsoNormal"><div style="font-size: 13px;"><span lang="EN-US" style="color: #1f497d;"><span style="color: black;"><span style="font-family: Trebuchet MS, sans-serif; font-size: small;">This means that the original equation (Equation 7) must be used each time, and an example of its use can be seen in Equation 10. I have included two practical tools that can be used when mixing songs if a key shift is required:&nbsp;</span></span></span></div><ol><li><span style="font-family: Trebuchet MS, sans-serif;">A lookup table of common BPMs, pitch shifts and output results (Table 2 and 3)</span></li><li><span style="text-align: center;"><span style="font-family: Trebuchet MS, sans-serif;">A ruler for finding the number of semitones between notes in an octave (Table 4)</span></span></li></ol></div><span lang="EN-US" style="color: #1f497d; font-size: 13px; text-align: center;"></span><br /><div class="separator" style="clear: both; text-align: left;"><span lang="EN-US" style="color: #1f497d; font-size: 13px; text-align: center;"><br /></span></div><span lang="EN-US" style="color: #1f497d; font-size: 13px; text-align: center;"><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td><a href="http://4.bp.blogspot.com/-zdCLucIUgDc/Utiovr2poVI/AAAAAAAACXQ/oa5cQoGahjY/s1600/Table1.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><span style="font-family: Trebuchet MS, sans-serif; font-size: x-small;"><img border="0" src="http://4.bp.blogspot.com/-zdCLucIUgDc/Utiovr2poVI/AAAAAAAACXQ/oa5cQoGahjY/s1600/Table1.png" height="291" width="640" /></span></a></td></tr><tr><td class="tr-caption" style="font-size: 13px;"><div align="center" class="MsoNormal"><span style="color: #1f497d;"><span style="font-family: Trebuchet MS, sans-serif; font-size: xx-small;">Table 2: Output BPM values for given original BPM values with an applied positive pitch shift to change the key (in semitones)</span></span></div></td></tr></tbody></table></span><br /><div><span lang="EN-US" style="color: #1f497d; font-size: 13px; text-align: center;"><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="font-size: 13px; margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td><a href="http://4.bp.blogspot.com/-M3hgbXyKo3k/UtiotVPNkmI/AAAAAAAACWY/9G9f0okQvmI/s1600/Table2.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://4.bp.blogspot.com/-M3hgbXyKo3k/UtiotVPNkmI/AAAAAAAACWY/9G9f0okQvmI/s1600/Table2.png" height="292" width="640" /></a></td></tr><tr><td class="tr-caption" style="font-size: 10px;"><div align="center" class="MsoNormal"><span style="color: #1f497d;"><span style="font-family: Trebuchet MS, sans-serif; font-size: xx-small;">Table 3: Output BPM values for given original BPM values with an applied negative pitch shift to change the key (in semitones)</span></span><br /><span style="color: #1f497d;"><span style="font-family: Trebuchet MS, sans-serif; font-size: xx-small;"><br /></span></span></div></td></tr></tbody></table></span></div><div><span lang="EN-US" style="color: #1f497d; font-size: 13px; text-align: center;"><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td><a href="http://4.bp.blogspot.com/-6TkBGseHQAQ/UtioxDrJY8I/AAAAAAAACX8/7-DR3S1Smh4/s1600/note_key.png" imageanchor="1" style="font-size: 13px; margin-left: auto; margin-right: auto;"><img border="0" src="http://4.bp.blogspot.com/-6TkBGseHQAQ/UtioxDrJY8I/AAAAAAAACX8/7-DR3S1Smh4/s1600/note_key.png" height="82" width="640" /></a></td></tr><tr><td class="tr-caption" style="font-size: 13px;"><div align="center" class="MsoNormal"><span style="color: #1f497d;"><span style="font-family: Trebuchet MS, sans-serif; font-size: xx-small;">Table 4: Pitch and Key relationship to Semitones and Notes</span></span></div></td></tr></tbody></table></span></div> </div> <br> <hr> <aside id="comments" class="disqus"> <div class="container"> <h3><i class="icon icon-comments-o"></i> Comments</h3> <div id="disqus_thread"></div> <script type="text/javascript"> var disqus_shortname = 'incidentnormal'; var disqus_identifier = '/2014/pitch-shift-calculations'; var disqus_title = 'Pitch Shift Calculations'; var disqus_url = 'https://incidentnormal.github.io'; /*var disqus_developer = 1;*/ (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script> <noscript> Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a> </noscript> </div> </aside> </article> <footer class="site-footer"> <div class="container"> <ul class="social"> <li><a href="https://github.com/IncidentNormal" }target="_blank"><i class="icon icon-github"></i></a></li> <li><a href="https://www.linkedin.com/in/duncantait" target="_blank"><i class="icon icon-linkedin"></i></a></li> <li><a href="https://twitter.com" target="_blank"><i class="icon icon-twitter"></i></a></li> </ul> <p> <b>&copy;</b> <small>2016 All rights reserved. Made by <strong><a href="https://incidentnormal.github.io" target="_blank">incidentnormal</a></strong> using <strong><a href="http://jekyllrb.com/" target="_blank">Jekyll</a></strong>.</small> </p> </div> </footer> </main> <script src="/assets/js/jquery-2.1.1.js"></script> <script src="/assets/js/main.js"></script> </body> </html><!-- by incidentnormal -->